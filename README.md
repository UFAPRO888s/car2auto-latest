{
  "type": "carousel",
  "contents": [
    {
      "type": "bubble",
      "hero": {
        "type": "image",
        "size": "full",
        "aspectRatio": "20:13",
        "aspectMode": "cover",
        "url": "https://fastly-production.24c.in/hello-ar/dev/uploads/fd862cba-82e1-4396-a6e4-3a4920323524/163e71e9-fcab-4ce0-a41f-3d1a207c3c6e/62.jpg"
      },
      "body": {
        "type": "box",
        "layout": "vertical",
        "spacing": "sm",
        "contents": [
          {
            "type": "box",
            "layout": "horizontal",
            "contents": [
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "311,584",
                    "wrap": true,
                    "weight": "bold",
                    "size": "xl",
                    "color": "#FFFFFF",
                    "flex": 0
                  },
                  {
                    "type": "text",
                    "text": "บาท",
                    "wrap": true,
                    "size": "xxs",
                    "flex": 0,
                    "color": "#FFFFFF",
                    "align": "start",
                    "weight": "regular"
                  }
                ],
                "alignItems": "flex-end"
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "5,556.58",
                    "wrap": true,
                    "weight": "bold",
                    "size": "md",
                    "flex": 0,
                    "color": "#FFFFFF"
                  },
                  {
                    "type": "text",
                    "text": "บ./เดือน",
                    "wrap": true,
                    "weight": "regular",
                    "size": "xxs",
                    "flex": 0,
                    "color": "#FFFFFF"
                  }
                ],
                "alignItems": "center",
                "justifyContent": "flex-end"
              }
            ]
          },
          {
            "type": "box",
            "layout": "horizontal",
            "contents": [
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "333,394.88 บาท(7%)",
                    "wrap": true,
                    "weight": "regular",
                    "size": "xs",
                    "color": "#FFFFFF",
                    "align": "start",
                    "flex": 0
                  }
                ],
                "alignItems": "center",
                "justifyContent": "flex-start"
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "เงินดาวน์ 0 บาท",
                    "wrap": true,
                    "weight": "regular",
                    "size": "xxs",
                    "flex": 0,
                    "color": "#FFFFFF"
                  }
                ],
                "alignItems": "center",
                "justifyContent": "flex-end"
              }
            ]
          },
          {
            "type": "box",
            "layout": "vertical",
            "contents": [
              {
                "type": "text",
                "text": "Mitsubishi 2018",
                "weight": "bold",
                "margin": "md"
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "Mirage",
                    "size": "xs",
                    "weight": "bold"
                  },
                  {
                    "type": "text",
                    "text": "เกียร์อัตโนมัติ",
                    "size": "xs"
                  }
                ],
                "alignItems": "center",
                "justifyContent": "center",
                "spacing": "none"
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "16,615 กม.",
                    "size": "xs"
                  },
                  {
                    "type": "text",
                    "text": "เบนซิน",
                    "size": "xs"
                  }
                ]
              }
            ],
            "backgroundColor": "#ffffff",
            "margin": "md",
            "cornerRadius": "5px",
            "position": "relative",
            "flex": 1,
            "spacing": "md",
            "paddingAll": "5px"
          }
        ],
        "backgroundColor": "#1B65A6"
      },
      "footer": {
        "type": "box",
        "layout": "horizontal",
        "spacing": "sm",
        "contents": [
          {
            "type": "button",
            "style": "primary",
            "action": {
              "type": "uri",
              "label": "เพิ่มเติม",
              "uri": "https://linecorp.com"
            },
            "height": "sm"
          },
          {
            "type": "box",
            "layout": "horizontal",
            "contents": [
              {
                "type": "image",
                "size": "xxs",
                "url": "https://cdn-icons-png.flaticon.com/512/3382/3382301.png",
                "align": "start",
                "margin": "md",
                "flex": 0
              },
              {
                "type": "text",
                "text": "Khlong San",
                "align": "center"
              }
            ],
            "justifyContent": "center",
            "alignItems": "center"
          }
        ],
        "justifyContent": "center",
        "alignItems": "center"
      }
    },
    {
      "type": "bubble",
      "hero": {
        "type": "image",
        "size": "full",
        "aspectRatio": "20:13",
        "aspectMode": "cover",
        "url": "https://fastly-production.24c.in/hello-ar/dev/uploads/fd862cba-82e1-4396-a6e4-3a4920323524/163e71e9-fcab-4ce0-a41f-3d1a207c3c6e/62.jpg"
      },
      "body": {
        "type": "box",
        "layout": "vertical",
        "spacing": "sm",
        "contents": [
          {
            "type": "box",
            "layout": "horizontal",
            "contents": [
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "311,584",
                    "wrap": true,
                    "weight": "bold",
                    "size": "xl",
                    "color": "#FFFFFF",
                    "flex": 0
                  },
                  {
                    "type": "text",
                    "text": "บาท",
                    "wrap": true,
                    "size": "xxs",
                    "flex": 0,
                    "color": "#FFFFFF",
                    "align": "start",
                    "weight": "regular"
                  }
                ],
                "alignItems": "flex-end"
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "5,556.58",
                    "wrap": true,
                    "weight": "bold",
                    "size": "md",
                    "flex": 0,
                    "color": "#FFFFFF"
                  },
                  {
                    "type": "text",
                    "text": "บ./เดือน",
                    "wrap": true,
                    "weight": "regular",
                    "size": "xxs",
                    "flex": 0,
                    "color": "#FFFFFF"
                  }
                ],
                "alignItems": "center",
                "justifyContent": "flex-end"
              }
            ]
          },
          {
            "type": "box",
            "layout": "horizontal",
            "contents": [
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "333,394.88 บาท(7%)",
                    "wrap": true,
                    "weight": "regular",
                    "size": "xs",
                    "color": "#FFFFFF",
                    "align": "start",
                    "flex": 0
                  }
                ],
                "alignItems": "center",
                "justifyContent": "flex-start"
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "เงินดาวน์ 0 บาท",
                    "wrap": true,
                    "weight": "regular",
                    "size": "xxs",
                    "flex": 0,
                    "color": "#FFFFFF"
                  }
                ],
                "alignItems": "center",
                "justifyContent": "flex-end"
              }
            ]
          },
          {
            "type": "box",
            "layout": "vertical",
            "contents": [
              {
                "type": "text",
                "text": "Mitsubishi 2018",
                "weight": "bold",
                "margin": "md"
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "Mirage",
                    "size": "xs",
                    "weight": "bold"
                  },
                  {
                    "type": "text",
                    "text": "เกียร์อัตโนมัติ",
                    "size": "xs"
                  }
                ],
                "alignItems": "center",
                "justifyContent": "center",
                "spacing": "none"
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "16,615 กม.",
                    "size": "xs"
                  },
                  {
                    "type": "text",
                    "text": "เบนซิน",
                    "size": "xs"
                  }
                ]
              }
            ],
            "backgroundColor": "#ffffff",
            "margin": "md",
            "cornerRadius": "5px",
            "position": "relative",
            "flex": 1,
            "spacing": "md",
            "paddingAll": "5px"
          }
        ],
        "backgroundColor": "#1B65A6"
      },
      "footer": {
        "type": "box",
        "layout": "horizontal",
        "spacing": "sm",
        "contents": [
          {
            "type": "button",
            "style": "primary",
            "action": {
              "type": "uri",
              "label": "เพิ่มเติม",
              "uri": "https://linecorp.com"
            },
            "height": "sm"
          },
          {
            "type": "box",
            "layout": "horizontal",
            "contents": [
              {
                "type": "image",
                "size": "xxs",
                "url": "https://cdn-icons-png.flaticon.com/512/3382/3382301.png",
                "align": "start",
                "margin": "md",
                "flex": 0
              },
              {
                "type": "text",
                "text": "Khlong San",
                "align": "center"
              }
            ],
            "justifyContent": "center",
            "alignItems": "center"
          }
        ],
        "justifyContent": "center",
        "alignItems": "center"
      }
    }
  ]
}



import React, { useEffect, useRef, useState } from 'react'
import axios from 'axios'
import Image from 'next/image'
import { Button } from '@/components/Button'
import { Container } from './Container'
function UptoHost() {
  const [file, setFile] = useState('')
  const [fileList, setFileList] = useState(null)
  const [data, getFile] = useState({ name: '', path: '' })
  const [progress, setProgess] = useState(0)
  const [handleFL, sethandleFL] = useState(null)

  const el = useRef()

  const handleChange = (e) => {
    setProgess(0)
    //const file = e.target.files
    // console.log(file)
    //console.log(e.target.files)
    //for (let i = 0; i < e.target.files.length; i++) {
    //  formData.append("images", e.target.files[i]);
    //}
    setFileList(e.target.files)
    //setFileList(e.target.files);
  }

  const uploadFile = () => {
    // const data = new FormData();
    // file.forEach((filex, i) => {
    //   data.append(`file-${i}`, filex, filex.name);
    // });
    //console.log(file)
    const formData = new FormData()
    for (let i = 0; i < fileList.length; i++) {
      /// console.log(fileList[i])
      formData.append('files', fileList[i].name)
      axios
        .post('https://storage.car2autobuy.com/upload', formData, {
          onUploadProgress: (ProgressEvent) => {
            let progress =
              Math.round((ProgressEvent.loaded / ProgressEvent.total) * 100) +
              '%'
            setProgess(progress)
          },
        })
        .then((res) => {
          //console.log(res)
          getFile({
            name: res.data.name,
            path: 'https://storage.car2autobuy.com' + res.data.path,
          })
        })
        .catch((err) => console.log(err))
    }

    // axios
    //   .post('https://storage.car2autobuy.com/upload', formData, {
    //     onUploadProgress: (ProgressEvent) => {
    //       let progress =
    //         Math.round((ProgressEvent.loaded / ProgressEvent.total) * 100) + '%'
    //       setProgess(progress)
    //     },
    //   })
    //   .then((res) => {
    //     //console.log(res)
    //     getFile({
    //       name: res.data.name,
    //       path: 'https://storage.car2autobuy.com' + res.data.path,
    //     })
    //   })
    //   .catch((err) => console.log(err))
  }
  const files = fileList ? [...fileList] : []
  return (
    <Container>
      <div className="flex max-w-lg justify-center rounded-md border-2 border-dashed border-gray-300 px-6 pb-6 pt-5">
        <div className="space-y-1 text-center">
          {data.path ? (
            <Image
              src={data.path}
              alt={data.name}
              width={100}
              height={100}
              layout="responsive"
            />
          ) : (
            <svg
              className="mx-auto h-12 w-12 text-gray-400"
              stroke="currentColor"
              fill="none"
              viewBox="0 0 48 48"
              aria-hidden="true"
            >
              <path
                d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02"
                strokeWidth={2}
                strokeLinecap="round"
                strokeLinejoin="round"
              />
            </svg>
          )}

          <div className="grid grid-cols-1 text-sm text-gray-600">
            <label
              htmlFor="sampleFile"
              className="relative cursor-pointer rounded-md bg-white font-medium text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 hover:text-indigo-500"
            >
              <span>รูปภาพ</span>
              <input
                id="sampleFile"
                name="sampleFile"
                type="file"
                className="sr-only"
                //onChange={(event) => handleChange(event.target.value)}
                onChange={handleChange}
                multiple={true}
              />
            </label>
            <div className="pl-1">
              <div className="progessBar">{progress}</div>
              <Button onClick={uploadFile} className="rounded-md">
                Upload
              </Button>
            </div>
          </div>
          <p className="text-xs text-gray-500">PNG, JPG, GIF up to 10MB</p>
          <ul>
            {files.map((file, i) => (
              <li key={i}>
                {file.name} - {file.type}
              </li>
            ))}
          </ul>
        </div>
      </div>
    </Container>
  )
}

export default UptoHost
